<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />

    <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <meta name="format-detection" content="telephone=no, email=no" />
	<title></title>
	
	<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
    <![endif]-->
	<script src="../../js/common/html5shiv.min.js"></script>
     <script src="../../js/common/respond.min.js"></script>
	<link href="../../../bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
	<script src="../../js/common/jquery-1.12.4.min.js"></script>
	<script src="../../js/common/require.js"></script>
	<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
	<script src="../../../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	
	<style type="text/css">
		.upImg{
			border: 1px dashed #ccc;
			width: 100px;
			height: 100px;
			line-height: 100px;
		}
		.cursor{
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div class="container">
		<form>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopName">店铺名称
			    </label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control" id="shopName" placeholder="请输入店铺名称">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopAddress">详细地址</label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control" id="shopAddress" placeholder="请输入详细地址">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopPhone">联系方式</label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control" id="shopPhone" placeholder="请输入联系方式">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopDes">店铺简介</label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control" id="shopDes">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopTitle">店铺标语</label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control" id="shopTitle">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="sendTime">配送时间</label>
			    <div class="form-item col-xs-8">
			    	<input type="text" class="form-control layui-input" id="sendTime">
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopTitle">店铺特色</label>
			    <div class="form-item col-xs-8">
			    	<div class="checkbox">
			    		<label>
						    <input type="checkbox" value="1">
						    品牌保证
						</label>
						<label>
						    <input type="checkbox" value="2">
						    蜂鸟转送
						</label>
						<label>
						    <input type="checkbox" value="3">
						    新店开铺
						</label>
						<label>
						    <input type="checkbox" value="4">
						    外卖保障
						</label>
						<label>
						    <input type="checkbox" value="5">
						    准时达
						</label>
						<label>
						    <input type="checkbox" value="6">
						    开发票
						</label>
			    	</div>
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopAddress">店铺分类</label>
			    <div class="form-item col-xs-8">
			    	<select class="form-control">
					  <option>小吃饮料</option>
					  <option>快餐便当</option>
					  <option>特色菜系</option>
					  <option>鲜花蛋糕</option>
					  <option>奶茶甜点</option>
					</select>
			    </div>
			</div>
			<div class="form-group row">
			    <label class="col-xs-3 text-right" for="shopTitle">配送费</label>
			    <div class="form-item col-xs-4">
			    	<div class="input-group">
				      <input type="text" class="form-control" value="5" id="sendPrice">
				      <span class="input-group-btn">
				        <button class="btn btn-default btn-count" type="button" data-type="delete" for="sendPrice">
				        	<span class="glyphicon glyphicon-minus"></span>
				        </button>
				        <button class="btn btn-default btn-count" type="button" data-type="add" for="sendPrice">
				        	<span class="glyphicon glyphicon-plus"></span>
				       	</button>
				      </span>
				    </div>
			    </div>
			</div>
			<div class="form-group text-right">
			    <label class="col-xs-3" for="shopPic">店铺图片</label>
			    <div class="form-item col-xs-8 text-left">
				     <div class="upImg text-center cursor" for="exampleInputFile">
				     	<img src="../../image/add.png">
				     </div>
			    	<input type="file" id="exampleInputFile" style="visibility: hidden;">
			    </div>
			</div>
			<div class="form-group text-right col-xs-12">
				<button type="submit" class="btn btn-default">立即创建</button>
			</div> 
		</form>
	</div>
</body>
<script src="../../layui/layui.all.js"></script>
<script type="text/javascript">
	$(function(){
		var addShop = {
			myEvent:function(){
				$('.upImg').click(function(){
					var id = $(this).attr('for');
					addShop.upImg(id);
					
				})
				$('.btn-count').click(function(){
					var idEle = $(this).attr('for'),
						val = $('#'+idEle).val().trim(),
						btnType = $(this).attr('data-type');
					switch(btnType){
						case 'delete':
							if(val > 0){
								val--;
								$('#'+idEle).val(val);
							}
							break;
						case 'add':
							val++;
							$('#'+idEle).val(val);
							break;
					}
					
				})
			},
			upImg:function(ele){
				var upEle = $('#' + ele);
				upEle.click(function(){
					$(this).change(function(e){
						addShop.getPhoto(e.target);
					})
				})
				upEle.trigger('click');
			},
			getPhoto:function(node){
				var imgURL = "";  
		        try{  
		            var file = null;  
		            if(node.files && node.files[0] ){  
		                file = node.files[0];  
		            }else if(node.files && node.files.item(0)) {  
		                file = node.files.item(0);  
		            }  
		            //Firefox 因安全性问题已无法直接通过input[file].value 获取完整的文件路径  
		            try{  
		                imgURL =  file.getAsDataURL();  
		            }catch(e){  
		                imgRUL = window.URL.createObjectURL(file);  
		            }  
		        }catch(e){  
		            if (node.files && node.files[0]) {  
		                var reader = new FileReader();  
		                reader.onload = function (e) {  
		                    imgURL = e.target.result;  
		                };  
		                reader.readAsDataURL(node.files[0]);  
		            }  
		        }  
		        addShop.creatImg(imgRUL);  
        		return imgURL;  
			},
			creatImg:function(imgUrl){
				var textHtml = "<img src='"+imgRUL+"'width='100px' height='100px'/>";  
        		$(".upImg").html(textHtml);  
			},
			init:function(){
				var laydate = layui.laydate;
				laydate.render({
				    elem: '#sendTime' //指定元素
				});
				this.myEvent();
			}
		}
		addShop.init();
	})
</script>
</html>